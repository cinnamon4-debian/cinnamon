Description: Fix scripts to expect translation files in the standard folder
Author: Nicolas Bourdaud <nicolas.bourdaud@gmail.com>
Origin: vendor
Forwarded: no
Applied-Upstream: no
Last-Update: 2013-06-02

Index: cinnamon/files/generate_desktop_files
===================================================================
--- cinnamon.orig/files/generate_desktop_files	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/files/generate_desktop_files	2014-03-12 12:39:52.623683498 +0100
@@ -26,12 +26,12 @@
 """)
 
 import gettext
-gettext.install("cinnamon", "/usr/share/cinnamon/locale")
+gettext.install("cinnamon", "/usr/share/locale")
 
-for directory in os.listdir("/usr/share/cinnamon/locale"):
-	if os.path.isdir(os.path.join("/usr/share/cinnamon/locale", directory)):
+for directory in os.listdir("/usr/share/locale"):
+	if os.path.isdir(os.path.join("/usr/share/locale", directory)):
 		try:
-			language = gettext.translation('cinnamon-settings', "/usr/share/cinnamon/locale", languages=[directory])
+			language = gettext.translation('cinnamon-settings', "/usr/share/locale", languages=[directory])
 			language.install()
 			desktopFile.writelines("Name[%s]=%s\n" % (directory, _(menuName)))
 		except:
@@ -39,10 +39,10 @@
 
 desktopFile.writelines("Comment=Fine-tune Cinnamon settings\n")
 
-for directory in os.listdir("/usr/share/cinnamon/locale"):
-	if os.path.isdir(os.path.join("/usr/share/cinnamon/locale", directory)):
+for directory in os.listdir("/usr/share/locale"):
+	if os.path.isdir(os.path.join("/usr/share/locale", directory)):
 		try:
-			language = gettext.translation('cinnamon-settings', "/usr/share/cinnamon/locale", languages=[directory])
+			language = gettext.translation('cinnamon-settings', "/usr/share/locale", languages=[directory])
 			language.install()			
 			desktopFile.writelines("Comment[%s]=%s\n" % (directory, _(menuComment)))
 		except:
Index: cinnamon/files/usr/lib/cinnamon-settings/cinnamon-settings.py
===================================================================
--- cinnamon.orig/files/usr/lib/cinnamon-settings/cinnamon-settings.py	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/files/usr/lib/cinnamon-settings/cinnamon-settings.py	2014-03-12 12:39:52.627683336 +0100
@@ -32,7 +32,7 @@
     sys.exit(1)
 
 # i18n
-gettext.install("cinnamon", "/usr/share/cinnamon/locale")
+gettext.install("cinnamon", "/usr/share/locale")
 # i18n for menu item
 menuName = _("System Settings")
 menuComment = _("Control Center")
Index: cinnamon/js/ui/main.js
===================================================================
--- cinnamon.orig/js/ui/main.js	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/js/ui/main.js	2014-03-12 12:39:52.627683336 +0100
@@ -140,7 +140,7 @@
 
 // Override Gettext localization
 const Gettext = imports.gettext;
-Gettext.bindtextdomain('cinnamon', '/usr/share/cinnamon/locale');
+Gettext.bindtextdomain('cinnamon', '/usr/share/locale');
 Gettext.textdomain('cinnamon');
 const _ = Gettext.gettext;
 
Index: cinnamon/src/Makefile.am
===================================================================
--- cinnamon.orig/src/Makefile.am	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/src/Makefile.am	2014-03-12 12:39:52.627683336 +0100
@@ -80,7 +80,7 @@
 	$(CINNAMON_CFLAGS)			\
 	-I$(srcdir)/tray			\
 	-DVERSION=\"$(VERSION)\"		\
-	-DLOCALEDIR=\"$(datadir)/cinnamon/locale\" 	\
+	-DLOCALEDIR=\"$(datadir)/locale\" 	\
 	-DDATADIR=\"$(datadir)\"		\
 	-DCINNAMON_LIBEXECDIR=\"$(libexecdir)\"	\
 	-DCINNAMON_DATADIR=\"$(pkgdatadir)\"	\
Index: cinnamon/files/usr/lib/cinnamon-screensaver-lock-dialog/cinnamon-screensaver-lock-dialog.py
===================================================================
--- cinnamon.orig/files/usr/lib/cinnamon-screensaver-lock-dialog/cinnamon-screensaver-lock-dialog.py	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/files/usr/lib/cinnamon-screensaver-lock-dialog/cinnamon-screensaver-lock-dialog.py	2014-03-12 12:39:52.627683336 +0100
@@ -8,7 +8,7 @@
 import socket
 
 # i18n
-gettext.install("cinnamon", "/usr/share/cinnamon/locale")
+gettext.install("cinnamon", "/usr/share/locale")
 
 class MainWindow:
   
Index: cinnamon/files/usr/lib/cinnamon-settings/modules/cs_backgrounds.py
===================================================================
--- cinnamon.orig/files/usr/lib/cinnamon-settings/modules/cs_backgrounds.py	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/files/usr/lib/cinnamon-settings/modules/cs_backgrounds.py	2014-03-12 12:39:52.627683336 +0100
@@ -11,7 +11,7 @@
 import subprocess
 import tempfile
 
-gettext.install("cinnamon", "/usr/share/cinnamon/locale")
+gettext.install("cinnamon", "/usr/share/locale")
 
 BACKGROUND_MODES = [
     ("wallpaper", _("Wallpaper")),
Index: cinnamon/files/usr/lib/cinnamon-settings/modules/cs_keyboard.py
===================================================================
--- cinnamon.orig/files/usr/lib/cinnamon-settings/modules/cs_keyboard.py	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/files/usr/lib/cinnamon-settings/modules/cs_keyboard.py	2014-03-12 12:39:52.627683336 +0100
@@ -5,7 +5,7 @@
 import cgi
 import gettext
 
-gettext.install("cinnamon", "/usr/share/cinnamon/locale")
+gettext.install("cinnamon", "/usr/share/locale")
 
 # Keybindings page - check if we need to store custom
 # keybindings to gsettings key as well as GConf (In Mint 14 this is changed)
Index: cinnamon/files/usr/bin/cinnamon-launcher
===================================================================
--- cinnamon.orig/files/usr/bin/cinnamon-launcher	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/files/usr/bin/cinnamon-launcher	2014-03-12 12:39:52.627683336 +0100
@@ -7,7 +7,7 @@
 import os, sys, gettext
 from gi.repository import Gtk
 
-gettext.install("cinnamon", "/usr/share/cinnamon/locale")
+gettext.install("cinnamon", "/usr/share/locale")
 
 def confirm_restart():
     d = Gtk.MessageDialog(None, 0, Gtk.MessageType.WARNING, Gtk.ButtonsType.YES_NO)
Index: cinnamon/files/usr/lib/cinnamon-desktop-editor/cinnamon-desktop-editor.py
===================================================================
--- cinnamon.orig/files/usr/lib/cinnamon-desktop-editor/cinnamon-desktop-editor.py	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/files/usr/lib/cinnamon-desktop-editor/cinnamon-desktop-editor.py	2014-03-12 12:39:52.627683336 +0100
@@ -12,7 +12,7 @@
 from cme import util
 
 # i18n
-gettext.install("cinnamon", "/usr/share/cinnamon/locale")
+gettext.install("cinnamon", "/usr/share/locale")
 # i18n for menu item
 
 _ = gettext.gettext
Index: cinnamon/generate_additional_files.py
===================================================================
--- cinnamon.orig/generate_additional_files.py	2014-03-12 12:39:52.631683174 +0100
+++ cinnamon/generate_additional_files.py	2014-03-12 12:39:52.627683336 +0100
@@ -3,7 +3,7 @@
 import os, gettext
 
 DOMAIN = "cinnamon"
-PATH = "/usr/share/cinnamon/locale"
+PATH = "/usr/share/locale"
 
 def generate(filename, prefix, name, comment, suffix):
     gettext.install(DOMAIN, PATH)
