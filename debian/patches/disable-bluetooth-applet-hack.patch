Description: Disable bluetooth applet hack
 The hack prevent the Debian package to build properly. Modify it into a
 simple rpath addition in libcinnamon.so.
Author: Nicolas Bourdaud <nicolas.bourdaud@gmail.com>
Origin: vendor
Forwarded: https://github.com/linuxmint/Cinnamon/pull/987
Applied-Upstream: no
Last-Update: 2012-12-10

--- a/src/cinnamon-plugin.c
+++ b/src/cinnamon-plugin.c
@@ -382,17 +382,3 @@
 
   return &info;
 }
-
-#if HAVE_BLUETOOTH
-/* HACK:
-   Add a non-static function that calls into libgnome-bluetooth-applet.so,
-   to avoid the linker being too smart and removing the dependency.
-   This function is never actually called.
-*/
-extern GType bluetooth_applet_get_type(void);
-void _cinnamon_link_to_bluetooth(void);
-
-void _cinnamon_link_to_bluetooth(void) {
-  bluetooth_applet_get_type();
-}
-#endif
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -262,11 +262,10 @@
 	rm -f $(@F).tmp
 EXTRA_DIST += cinnamon-enum-types.c.in
 
-libcinnamon_la_LDFLAGS = -avoid-version
+libcinnamon_la_LDFLAGS = -avoid-version -Wl,-rpath=/usr/lib/gnome-bluetooth
 libcinnamon_la_LIBADD =		\
 	-lm			\
 	$(CINNAMON_LIBS)	\
-	$(BLUETOOTH_LIBS)	\
 	libst-1.0.la       	\
 	libtray.la		\
 	libgvc.la		\
